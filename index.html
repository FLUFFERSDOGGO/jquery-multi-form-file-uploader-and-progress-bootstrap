<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

	<style>
		input[type=file]{
			float:left;
		}
	</style>
</head>
<body>

	<div class="container">
		<h1>File Uploader</h1>

		<form action="#" method="post" enctype="multipart/form-data">
			<input type="file" name="image">
			<button class="btn btn-sm btn-info upload">Upload</button>
			<button class="btn btn-sm btn-info cancel" type="button">Cancel</button>

			<div class="progress progress-striped active">
				<div class="progress-bar" style="width:0%"></div>
			</div>
		</form>

		<hr>

		<form action="#" method="post" enctype="multipart/form-data">
			<input type="file" name="image">
			<button class="btn btn-sm btn-info upload">Upload</button>
			<button class="btn btn-sm btn-info cancel" type="button">Cancel</button>

			<div class="progress progress-striped active">
				<div class="progress-bar" style="width:0%"></div>
			</div>
		</form>

		<hr>

		<form action="#" method="post" enctype="multipart/form-data">
			<input type="file" name="image">
			<button class="btn btn-sm btn-info upload">Upload</button>
			<button class="btn btn-sm btn-info cancel" type="button">Cancel</button>

			<div class="progress progress-striped active">
				<div class="progress-bar" style="width:0%"></div>
			</div>
		</form>
	</div><!-- end .container -->


	<script>

		$(document).on('submit','form',function(e){
			e.preventDefault();
			processFile($(this));
		});

		function processFile(form){
			var request = new XMLHttpRequest();
			var percent;
			var currentform;

			//progress
			request.upload.addEventListener('progress',function(e){
				 percent = Math.round(e.loaded/e.total*100);
				form.find('.progress-bar').width(percent+'%').html(percent+'%');
			});

			//event full load
			request.addEventListener('load',function(e){
				form.find('.progress-bar').html('upload complete...').addClass('progress-bar-success');
			});

			var formdata = new FormData(form[0]); //formelement

			request.open('post', 'server.php');
			request.send(formdata);

			form.on('click','.cancel',function(){
				request.abort();
				form.find('.progress-bar').html('aborted...');
			});
		}
	</script>
</body>
</html>